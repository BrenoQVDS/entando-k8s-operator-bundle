{
  "apiVersion": "entando.org/v1",
  "kind": "EntandoCompositeApp",
  "metadata": {
    "name": "my-entando-composite-app",
    "namespace": "my-namespace"
  },
  "spec": {
    "components": [
      {
        "kind": "EntandoDatabaseService",
        "metadata": {
          "name": "inline-entando-database-service"
        },
        "spec": {
          "dbms": "postgresql",
          "databaseName": "my_database",
          "createDeployment": true
        }
      },
      {
        "kind": "EntandoKeycloakServer",
        "metadata": {
          "name": "inline-keycloak"
        },
        "spec": {
          "ingressHostName": "entando.apps-crc.testing",
          "standardImage": "redhat-sso",
          "dbms": "postgresql",
          "replicas": 1,
          "environmentVariables": []
        }
      },
      {
        "kind": "EntandoClusterInfrastructure",
        "metadata": {
          "name": "inline-entando-cluster-infrastructure"
        },
        "spec": {
          "ingressHostName": "entando.apps-crc.testing",
          "replicas": 1,
          "environmentVariables": []
        }
      },
      {
        "apiVersion": "entando.org/v1",
        "kind": "EntandoApp",
        "metadata": {
          "name": "inline-app"
        },
        "spec": {
          "dbms": "postgresql",
          "environmentVariables": [],
          "ingressHostName": "entando.apps-crc.testing",
          "replicas": 1,
          "standardServerImage": "eap"
        }
      },
      {
        "kind": "EntandoPlugin",
        "metadata": {
          "name": "inline-plugin"
        },
        "spec": {
          "dbms": "postgresql",
          "healthCheckPath": "/management/health",
          "image": "entando/entando-avatar-plugin:6.0.5",
          "ingressHostName": "entando.apps-crc.testing",
          "ingressPath": "/avatarPlugin",
          "replicas": 1,
          "roles": [
            {
              "code": "admin",
              "name": "admin"
            },
            {
              "code": "user",
              "name": "user"
            }
          ],
          "securityLevel": "strict"
        }
      },
      {
        "apiVersion": "entando.org/v1",
        "kind": "EntandoAppPluginLink",
        "metadata": {
          "name": "inline-link"
        },
        "spec": {
          "entandoAppName": "inline-app",
          "entandoPluginName": "inline-plugin"
        }
      }
    ]
  }
}
