name: RELEASE

on:
  repository_dispatch:
    types: [release-entando]

jobs:
  download-operator-bundle:
    name: Download entando-k8s-operator-bundle
    runs-on: ubuntu-latest
    steps:
    - name: Checkout code
      uses: actions/checkout@v3
      with:
          ref: develop
    - name: Echo payload
      run: |
        echo '${{ toJSON(github.event.client_payload) }}'
    - name: Run script
      run: |
        echo "rhel8_mysql_80: sha256 = ${{ github.event.client_payload.relatedImages.rhel8_mysql_80.sha256 }}, version = ${{ github.event.client_payload.relatedImages.rhel8_mysql_80.version }}"
        echo "rhel8_postgresql_12: sha256 = ${{ github.event.client_payload.relatedImages.rhel8_postgresql_12.sha256 }}, version = ${{ github.event.client_payload.relatedImages.rhel8_postgresql_12.version }}"
        echo "app_builder_6_3: sha256 = ${{ github.event.client_payload.relatedImages.app_builder_6_3.sha256 }}, version = ${{ github.event.client_payload.relatedImages.app_builder_6_3.version }}"
        echo "app_builder_6_4: sha256 = ${{ github.event.client_payload.relatedImages.app_builder_6_4.sha256 }}, version = ${{ github.event.client_payload.relatedImages.app_builder_6_4.version }}"
        echo "busybox: sha256 = ${{ github.event.client_payload.relatedImages.busybox.sha256 }}, version = ${{ github.event.client_payload.relatedImages.busybox.version }}"
        echo "entando_avatar_plugin: sha256 = ${{ github.event.client_payload.relatedImages.entando_avatar_plugin.sha256 }}, version = ${{ github.event.client_payload.relatedImages.entando_avatar_plugin.version }}"
        echo "entando_component_manager_6_3: sha256 = ${{ github.event.client_payload.relatedImages.entando_component_manager_6_3.sha256 }}, version = ${{ github.event.client_payload.relatedImages.entando_component_manager_6_3.version }}"
        echo "entando_component_manager_6_4: sha256 = ${{ github.event.client_payload.relatedImages.entando_component_manager_6_4.sha256 }}, version = ${{ github.event.client_payload.relatedImages.entando_component_manager_6_4.version }}"
        echo "entando_de_app_eap_6_3: sha256 = ${{ github.event.client_payload.relatedImages.entando_de_app_eap_6_3.sha256 }}, version = ${{ github.event.client_payload.relatedImages.entando_de_app_eap_6_3.version }}"
        echo "entando_de_app_eap_6_4: sha256 = ${{ github.event.client_payload.relatedImages.entando_de_app_eap_6_4.sha256 }}, version = ${{ github.event.client_payload.relatedImages.entando_de_app_eap_6_4.version }}"
        echo "entando_de_app_wildfly_6_3: sha256 = ${{ github.event.client_payload.relatedImages.entando_de_app_wildfly_6_3.sha256 }}, version = ${{ github.event.client_payload.relatedImages.entando_de_app_wildfly_6_3.version }}"
        echo "entando_de_app_wildfly_6_4: sha256 = ${{ github.event.client_payload.relatedImages.entando_de_app_wildfly_6_4.sha256 }}, version = ${{ github.event.client_payload.relatedImages.entando_de_app_wildfly_6_4.version }}"
        echo "entando_k8s_app_controller: sha256 = ${{ github.event.client_payload.relatedImages.entando_k8s_app_controller.sha256 }}, version = ${{ github.event.client_payload.relatedImages.entando_k8s_app_controller.version }}"
        echo "entando_k8s_app_plugin_link_controller: sha256 = ${{ github.event.client_payload.relatedImages.entando_k8s_app_plugin_link_controller.sha256 }}, version = ${{ github.event.client_payload.relatedImages.entando_k8s_app_plugin_link_controller.version }}"
        echo "entando_k8s_cluster_infrastructure_controller: sha256 = ${{ github.event.client_payload.relatedImages.entando_k8s_cluster_infrastructure_controller.sha256 }}, version = ${{ github.event.client_payload.relatedImages.entando_k8s_cluster_infrastructure_controller.version }}"
        echo "entando_k8s_composite_app_controller: sha256 = ${{ github.event.client_payload.relatedImages.entando_k8s_composite_app_controller.sha256 }}, version = ${{ github.event.client_payload.relatedImages.entando_k8s_composite_app_controller.version }}"
        echo "entando_k8s_controller_coordinator: sha256 = ${{ github.event.client_payload.relatedImages.entando_k8s_controller_coordinator.sha256 }}, version = ${{ github.event.client_payload.relatedImages.entando_k8s_controller_coordinator.version }}"
        echo "entando_k8s_database_service_controller: sha256 = ${{ github.event.client_payload.relatedImages.entando_k8s_database_service_controller.sha256 }}, version = ${{ github.event.client_payload.relatedImages.entando_k8s_database_service_controller.version }}"
        echo "entando_k8s_dbjob: sha256 = ${{ github.event.client_payload.relatedImages.entando_k8s_dbjob.sha256 }}, version = ${{ github.event.client_payload.relatedImages.entando_k8s_dbjob.version }}"
        echo "entando_k8s_keycloak_controller: sha256 = ${{ github.event.client_payload.relatedImages.entando_k8s_keycloak_controller.sha256 }}, version = ${{ github.event.client_payload.relatedImages.entando_k8s_keycloak_controller.version }}"
        echo "entando_k8s_plugin_controller: sha256 = ${{ github.event.client_payload.relatedImages.entando_k8s_plugin_controller.sha256 }}, version = ${{ github.event.client_payload.relatedImages.entando_k8s_plugin_controller.version }}"
        echo "entando_k8s_service: sha256 = ${{ github.event.client_payload.relatedImages.entando_k8s_service.sha256 }}, version = ${{ github.event.client_payload.relatedImages.entando_k8s_service.version }}"
        echo "entando_process_driven_plugin: sha256 = ${{ github.event.client_payload.relatedImages.entando_process_driven_plugin.sha256 }}, version = ${{ github.event.client_payload.relatedImages.entando_process_driven_plugin.version }}"
        echo "entando_keycloak: sha256 = ${{ github.event.client_payload.relatedImages.entando_keycloak.sha256 }}, version = ${{ github.event.client_payload.relatedImages.entando_keycloak.version }}"
        echo "entando_redhat_sso: sha256 = ${{ github.event.client_payload.relatedImages.entando_redhat_sso.sha256 }}, version = ${{ github.event.client_payload.relatedImages.entando_redhat_sso.version }}"
        echo "mysql_80_centos7: sha256 = ${{ github.event.client_payload.relatedImages.mysql_80_centos7.sha256 }}, version = ${{ github.event.client_payload.relatedImages.mysql_80_centos7.version }}"
        echo "postgresql_12_centos7: sha256 = ${{ github.event.client_payload.relatedImages.postgresql_12_centos7.sha256 }}, version = ${{ github.event.client_payload.relatedImages.postgresql_12_centos7.version }}"